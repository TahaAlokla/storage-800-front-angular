<header class="border-b border-slate-200 bg-white dark:border-[#313f63] dark:bg-[#1a2442]">
  <div class="mx-auto flex w-full max-w-6xl flex-col gap-3 px-4 py-3 sm:px-6 lg:flex-row lg:items-center lg:justify-between">
    <div class="flex items-center gap-3">
      <h1 class="text-xl font-semibold tracking-tight dark:text-slate-100">
        <a [routerLink]="['/users']">ReqRes</a>
      </h1>
      <p class="text-sm text-slate-600 dark:text-slate-400">
        {{ 'header.subtitle' | transloco }}
      </p>
    </div>

    <div class="relative w-full max-w-md">
      <label for="header-user-search" class="sr-only">
        {{ 'header.search.label' | transloco }}
      </label>
      <input
        id="header-user-search"
        type="text"
        inputmode="numeric"
        autocomplete="off"
        [value]="searchInput()"
        (input)="onSearchInput($event)"
        (keydown.enter)="onSearchEnter($event)"
        [placeholder]="'header.search.placeholder' | transloco"
        class="w-full rounded-xl border border-slate-300 bg-white px-4 py-2.5 text-sm text-slate-900 outline-none transition placeholder:text-slate-500 focus:border-[#d98667] focus:ring-2 focus:ring-[#d98667]/25 dark:border-[#415582] dark:bg-[#16203a] dark:text-slate-100 dark:placeholder:text-slate-400 dark:focus:border-[#d98667] dark:focus:ring-[#d98667]/30"
        [attr.aria-label]="'header.search.label' | transloco"
      />

      @if (showSearchPanel()) {
        <div
          class="absolute left-0 right-0 top-[calc(100%+0.45rem)] z-50 rounded-xl border border-slate-200 bg-white p-3 shadow-lg dark:border-[#313f63] dark:bg-[#1a2442]"
          role="status"
          aria-live="polite"
        >
          @switch (searchState()) {
            @case ('loading') {
              <p class="text-sm text-slate-600 dark:text-slate-300">
                {{ 'header.search.loading' | transloco }}
              </p>
            }
            @case ('invalid') {
              <p class="text-sm text-amber-700 dark:text-amber-300">
                {{ 'header.search.invalidId' | transloco }}
              </p>
            }
            @case ('notFound') {
              <p class="text-sm text-slate-600 dark:text-slate-300">
                {{ 'header.search.notFound' | transloco }}
              </p>
            }
            @case ('error') {
              <p class="text-sm text-red-700 dark:text-red-300">
                {{ 'header.search.error' | transloco }}
              </p>
            }
            @case ('found') {
              @if (searchResult(); as user) {
                <div class="flex items-center justify-between gap-3">
                  <div class="min-w-0">
                    <p class="truncate text-sm font-semibold text-slate-900 dark:text-slate-100">
                      {{ user.first_name }} {{ user.last_name }}
                    </p>
                    <p class="truncate text-xs text-slate-600 dark:text-slate-400">
                      {{ user.email }}
                    </p>
                  </div>
                  <button
                    type="button"
                    (click)="navigateToUser(user.id)"
                    class="shrink-0 rounded-lg bg-[#d98667] px-3 py-2 text-xs font-semibold text-white transition hover:bg-[#cb7a5d] focus:outline-none focus:ring-2 focus:ring-[#d98667]/35"
                  >
                    {{ 'header.search.openDetails' | transloco }}
                  </button>
                </div>
              }
            }
          }
        </div>
      }
    </div>

    <nav class="text-sm text-slate-600 dark:text-slate-400">
      <a [routerLink]="['/users']" class="hover:text-slate-900 dark:hover:text-slate-200">
        {{ 'common.actions.home' | transloco }}
      </a>
    </nav>
  </div>
</header>
